<div th:fragment="header">
  <header class="oneshop-header" id="main-header">

    <!-- üîπ THANH TR√äN (TOP BAR) -->
    <div class="top-bar">
      <div class="container top-content">
        <div class="left">
          <span><i class="fa fa-phone"></i> (08) 123 456 7890</span>
          <span><i class="fa fa-envelope"></i> support@oneshop.vn</span>
          <span class="social">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-pinterest-p"></i></a>
          </span>
        </div>

        <div class="right">
          <!-- Login dropdown -->
          <div class="dropdown login-dropdown" sec:authorize="isAnonymous()">
            <button class="dropbtn">
              <i class="fa fa-user"></i> ƒêƒÉng nh·∫≠p <i class="fa fa-caret-down arrow"></i>
            </button>
            <div class="dropdown-content">
              <a href="#">So s√°nh s·∫£n ph·∫©m</a>
              <a href="#">T√†i kho·∫£n c·ªßa t√¥i</a>
              <a href="#">Danh s√°ch y√™u th√≠ch</a>
              <a th:href="@{/login}">ƒêƒÉng nh·∫≠p</a>
            </div>
          </div>

          <div class="dropdown login-dropdown" sec:authorize="isAuthenticated()">
            <button class="dropbtn">
              <i class="fa fa-user"></i> <span sec:authentication="name"></span>
              <i class="fa fa-caret-down arrow"></i>
            </button>
            <div class="dropdown-content">
              <a href="#">T√†i kho·∫£n c·ªßa t√¥i</a>
              <form th:action="@{/logout}" method="post">
                <button type="submit" class="logout-btn">ƒêƒÉng xu·∫•t</button>
              </form>
            </div>
          </div>

          <!-- Language dropdown -->
          <div class="dropdown lang-dropdown">
            <button class="dropbtn">
              <img src="https://flagcdn.com/16x12/vn.png" alt="VN"> Ti·∫øng Vi·ªát
              <i class="fa fa-caret-down arrow"></i>
            </button>
            <div class="dropdown-content">
              <a href="#"><img src="https://flagcdn.com/16x12/vn.png" alt=""> Ti·∫øng Vi·ªát</a>
              <a href="#"><img src="https://flagcdn.com/16x12/gb.png" alt=""> English</a>
              <a href="#"><img src="https://flagcdn.com/16x12/kr.png" alt=""> ÌïúÍµ≠Ïñ¥</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- üî∏ THANH MENU CH√çNH -->
    <nav class="main-nav">
      <div class="container nav-content">
        <div class="logo">
          <a href="/" class="logo-text">Eighteen<span>beauty</span></a>
        </div>

        <ul class="menu">
          <li><a th:href="@{/}">TRANG CH·ª¶</a></li>
          <li><a th:href="@{/shop}">S·∫¢N PH·∫®M</a></li>
          <li><a th:href="@{/blog}">BLOG</a></li>
          <li><a th:href="@{/about}">GI·ªöI THI·ªÜU</a></li>
          <li><a th:href="@{/contact}">LI√äN H·ªÜ</a></li>
        </ul>

        <!-- üõí ICON H√åNH ·∫¢NH -->
        <div class="actions">
          <!-- K√≠nh l√∫p -->
          <div class="search-wrapper">
            <img th:src="@{/images/icons/search.png}" alt="T√¨m ki·∫øm" class="icon-btn" id="searchToggle">
            <div class="mini-search" id="miniSearch">
              <input type="text" placeholder="Nh·∫≠p t·ª´ kh√≥a v√† nh·∫•n Enter">
              <button><img th:src="@{/images/icons/search.png}" alt="Search"></button>
            </div>
          </div>

          <!-- Gi·ªè h√†ng -->
          <a href="#" class="cart-btn">
            <img th:src="@{/images/icons/shopping-cart.png}" alt="Gi·ªè h√†ng" class="icon-btn">
            <span class="badge">3</span>
          </a>
        </div>
      </div>
    </nav>
  </header>

  <!-- ================== SCRIPT ================== -->
  <script>
    // Sticky Header
    window.addEventListener("scroll", function () {
      const header = document.getElementById("main-header");
      header.classList.toggle("sticky", window.scrollY > 80);
    });

    // Dropdown arrow
    document.querySelectorAll(".dropdown").forEach((drop) => {
      drop.addEventListener("mouseenter", () => drop.querySelector(".arrow").classList.add("rotate"));
      drop.addEventListener("mouseleave", () => drop.querySelector(".arrow").classList.remove("rotate"));
    });

    // Hi·ªán √¥ t√¨m ki·∫øm nh·ªè
    const searchToggle = document.getElementById("searchToggle");
    const miniSearch = document.getElementById("miniSearch");

    document.addEventListener("click", (e) => {
      if (searchToggle.contains(e.target)) {
        miniSearch.classList.toggle("active");
      } else if (!miniSearch.contains(e.target)) {
        miniSearch.classList.remove("active");
      }
    });
  </script>
</div>
